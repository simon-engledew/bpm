<!DOCTYPE html>
<head>
    <script src="//unpkg.com/tone"></script>
    <style>
        html, body {
            height: 100%;
            width: 100%;
            padding: 0;
            margin: 0;
        }
        body {
            display: grid;
            justify-items: center;
            align-content: center;
        }
        ul {
            list-style-type: none;
            display: flex;
            gap: 10px;
        }
        ul > li {
            border: solid 2px #fff;
            outline: solid 2px #009;
            width: 50px;
            height: 50px;
            background-color: none;
            border-radius: 5px;
        }
        ul > li.pattern {
            background-color: #eee;
        }
        ul > li.active {
            background-color: #009;
        }
        main {
            margin: 2em 0;
        }
        header, footer {
            text-align: right;
        }
    </style>
    <script>
        const synth = new Tone.Synth({
            oscillator: { type: "sine", modulationFrequency: 0.2 },
            envelope: { attack: 0, decay: 0.5, sustain: 0, release: 0.1 }
        }).toDestination();

        const pattern = [
            1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,
            1,1,1,1,1,1,1,1,

            1,0,1,0,1,0,1,0,
            1,0,1,0,1,0,1,0,
            1,0,1,0,1,0,1,0,
            1,1,1,1,1,1,1,1,

            1,0,0,0,1,0,0,0,
            1,0,0,0,1,0,0,0,
            1,0,0,0,1,0,0,0,
            1,1,1,1,1,1,1,1,

            1,0,0,0,0,0,0,0,
            1,0,0,0,0,0,0,0,
            1,0,0,0,0,0,0,0,
            1,0,0,0,0,0,0,0,
        ];

        let index = 0;

        new Tone.Loop((time) => {
            if (pattern[index]) {
                synth.triggerAttackRelease(440, "8n", time);
            }

            document.querySelectorAll("ul > li").forEach(function (e, i) {
                const y = pattern[i + (Math.floor(index / 8) * 8)];
                e.classList[y ? 'add' : 'remove']('pattern');
                e.classList[y && i === (index % 8) ? "add" : "remove"]("active");
            });

            index = (index + 1) % pattern.length;
        }, "4n").start();

        function start() {
            Tone.getTransport().bpm.value = parseInt(document.getElementById('bpm').value) || 100;
            Tone.getTransport().start();
        }
    </script>
</head>
<body>
    <section>
        <header><label>bpm:</label> <input type="text" value="115" id="bpm" /></header>
        <main>
            <ul>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </main>
        <footer><button onclick="start()">Start</button></footer>
    </section>
</body>